import { c as create_ssr_component, o as onDestroy, e as escape } from "../../../chunks/ssr.js";
import "@sveltejs/kit/internal";
import "../../../chunks/exports.js";
import "../../../chunks/utils.js";
import "@sveltejs/kit/internal/server";
import "../../../chunks/state.svelte.js";
import "../../../chunks/supabaseClient.js";
const GAME_CONFIG = {
  tech_info: {
    M: {
      br_req: 8
    },
    H: {
      br_req: 20
    }
  }
};
const css = {
  code: "body{margin:0;padding:0;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;background:#2d2d30;min-height:100vh}.container.svelte-1l6qcjv.svelte-1l6qcjv{max-width:1400px;margin:0 auto;padding:2rem 1rem}.header.svelte-1l6qcjv.svelte-1l6qcjv{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}h1.svelte-1l6qcjv.svelte-1l6qcjv{color:white;margin:0;font-size:2rem}h2.svelte-1l6qcjv.svelte-1l6qcjv,h3.svelte-1l6qcjv.svelte-1l6qcjv{margin-top:0;color:#e0e0e0}h4.svelte-1l6qcjv.svelte-1l6qcjv{color:#cccccc;margin-top:0}.btn-logout.svelte-1l6qcjv.svelte-1l6qcjv{padding:0.5rem 1rem;background:rgba(255, 255, 255, 0.1);color:white;border:2px solid rgba(255, 255, 255, 0.3);border-radius:6px;cursor:pointer;font-weight:600}.btn-logout.svelte-1l6qcjv.svelte-1l6qcjv:hover{background:rgba(255, 255, 255, 0.2)}.card.svelte-1l6qcjv.svelte-1l6qcjv{background:#3e3e42;border-radius:12px;padding:2rem;box-shadow:0 10px 40px rgba(0, 0, 0, 0.3);margin-bottom:2rem}.alert.svelte-1l6qcjv.svelte-1l6qcjv{padding:1rem;border-radius:8px;margin-bottom:1rem;font-weight:500}.alert-success.svelte-1l6qcjv.svelte-1l6qcjv{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.alert-warning.svelte-1l6qcjv.svelte-1l6qcjv{background:#fff3cd;color:#856404;border:1px solid #ffeaa7}.status-header.svelte-1l6qcjv.svelte-1l6qcjv{background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white}.status-grid.svelte-1l6qcjv.svelte-1l6qcjv{display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));gap:1rem;font-size:0.95rem}.submitted-banner.svelte-1l6qcjv.svelte-1l6qcjv{margin-top:1rem;padding:0.75rem;background:rgba(255, 255, 255, 0.2);border-radius:6px;text-align:center;font-weight:bold;font-size:1.1rem}.budget-box.svelte-1l6qcjv.svelte-1l6qcjv{padding:1rem;border-radius:8px;margin-bottom:1rem;text-align:center;font-weight:600;font-size:1.1rem;box-shadow:0 2px 8px rgba(0, 0, 0, 0.1)}.allocation-grid.svelte-1l6qcjv.svelte-1l6qcjv{display:grid;grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));gap:2rem;margin-bottom:2rem}.allocation-section.svelte-1l6qcjv.svelte-1l6qcjv{padding:1.5rem;background:#252526;border-radius:8px}.allocation-section.svelte-1l6qcjv h3.svelte-1l6qcjv{margin-top:0;color:#8a9dff;font-size:1.1rem}.help-text.svelte-1l6qcjv.svelte-1l6qcjv{color:#9d9d9d;font-size:0.85rem;margin-bottom:1rem;font-style:italic}label.svelte-1l6qcjv.svelte-1l6qcjv{display:block;margin-bottom:0.75rem;font-weight:500;color:#cccccc}.checkbox-label.svelte-1l6qcjv.svelte-1l6qcjv{display:flex;align-items:center;gap:0.5rem;cursor:pointer}.checkbox-label.svelte-1l6qcjv input.svelte-1l6qcjv{cursor:pointer}.radio-group.svelte-1l6qcjv.svelte-1l6qcjv{display:flex;flex-direction:column;gap:0.5rem}.radio-group.svelte-1l6qcjv label.svelte-1l6qcjv{display:flex;align-items:center;gap:0.5rem;cursor:pointer}.number-input.svelte-1l6qcjv.svelte-1l6qcjv,.select-input.svelte-1l6qcjv.svelte-1l6qcjv{width:100%;padding:0.5rem;margin-top:0.25rem;border:2px solid #555;border-radius:6px;font-size:1rem;background:#252526;color:#e0e0e0}.number-input.svelte-1l6qcjv.svelte-1l6qcjv:focus,.select-input.svelte-1l6qcjv.svelte-1l6qcjv:focus{outline:none;border-color:#667eea}.number-input.svelte-1l6qcjv.svelte-1l6qcjv:disabled,.select-input.svelte-1l6qcjv.svelte-1l6qcjv:disabled{background:#1e1e1e;cursor:not-allowed;opacity:0.5}.number-input.disabled.svelte-1l6qcjv.svelte-1l6qcjv{background:#3e2323;border-color:#dc3545}.req-text.svelte-1l6qcjv.svelte-1l6qcjv{display:block;font-size:0.8rem;color:#f48771;margin-top:0.25rem}.btn.svelte-1l6qcjv.svelte-1l6qcjv{padding:0.75rem 1.5rem;font-size:1rem;font-weight:600;border:none;border-radius:6px;cursor:pointer;transition:all 0.2s}.btn.svelte-1l6qcjv.svelte-1l6qcjv:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px rgba(0, 0, 0, 0.15)}.btn.svelte-1l6qcjv.svelte-1l6qcjv:disabled{opacity:0.6;cursor:not-allowed}.btn-primary.svelte-1l6qcjv.svelte-1l6qcjv{background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white}.btn-large.svelte-1l6qcjv.svelte-1l6qcjv{width:100%;padding:1rem;font-size:1.1rem}table.svelte-1l6qcjv.svelte-1l6qcjv{width:100%;border-collapse:collapse}th.svelte-1l6qcjv.svelte-1l6qcjv,td.svelte-1l6qcjv.svelte-1l6qcjv{padding:0.75rem;text-align:left;border-bottom:1px solid #555;color:#cccccc}th.svelte-1l6qcjv.svelte-1l6qcjv{background:#252526;font-weight:600;color:#e0e0e0;font-size:0.9rem}tbody.svelte-1l6qcjv tr.svelte-1l6qcjv:hover{background:#252526}.current-team.svelte-1l6qcjv.svelte-1l6qcjv{background:#1e3a5f;font-weight:600}.table-scroll.svelte-1l6qcjv.svelte-1l6qcjv{overflow-x:auto}.log-container.svelte-1l6qcjv.svelte-1l6qcjv{max-height:400px;overflow-y:auto;padding:1rem;background:#252526;border-radius:6px}.log-entry.svelte-1l6qcjv.svelte-1l6qcjv{padding:0.5rem;margin-bottom:0.5rem;background:#3e3e42;border-radius:4px;font-size:0.9rem;color:#cccccc}.log-round.svelte-1l6qcjv.svelte-1l6qcjv{display:inline-block;background:#667eea;color:white;padding:0.125rem 0.5rem;border-radius:4px;font-weight:600;margin-right:0.5rem}.muted.svelte-1l6qcjv.svelte-1l6qcjv{color:#9d9d9d;font-style:italic}",
  map: '{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { onMount, onDestroy } from \\"svelte\\";\\nimport { goto } from \\"$app/navigation\\";\\nimport { supabase } from \\"$lib/supabaseClient\\";\\nimport { GAME_CONFIG, TEAMS } from \\"$lib/config\\";\\nimport { validate_budget, roll_dice } from \\"$lib/gameLogic\\";\\nlet currentTeam = null;\\nlet gameState = null;\\nlet loading = true;\\nlet statusMessage = \\"\\";\\nlet allocSE = false;\\nlet allocTE = false;\\nlet allocIM = \\"none\\";\\nlet allocBR = 0;\\nlet allocAR = { L: 0, M: 0, H: 0 };\\nlet allocSP = [\\n  { target: \\"\\", tech: \\"L\\" },\\n  { target: \\"\\", tech: \\"L\\" }\\n];\\nlet budgetInfo = { used: 0, budget: 0, remaining: 0 };\\nlet budgetColor = \\"#d9ffd9\\";\\nlet canSubmit = false;\\nlet lastKnownRound = 0;\\nlet pollInterval;\\n$: if (gameState && currentTeam) {\\n  calculateBudget();\\n}\\nonMount(async () => {\\n  const role = sessionStorage.getItem(\\"wargame_role\\");\\n  const auth = sessionStorage.getItem(\\"wargame_auth\\");\\n  if (!role || auth !== \\"true\\" || role === \\"GM\\") {\\n    goto(\\"/\\");\\n    return;\\n  }\\n  currentTeam = role;\\n  await loadGameState();\\n  if (gameState && currentTeam) {\\n    gameState.active_users[currentTeam] = true;\\n    await saveGameState();\\n  }\\n  if (gameState) {\\n    lastKnownRound = gameState.round;\\n  }\\n  supabase.channel(\\"team-updates\\").on(\\n    \\"postgres_changes\\",\\n    { event: \\"*\\", schema: \\"public\\", table: \\"game_state\\" },\\n    (payload) => {\\n      console.log(\\"Real-time update received:\\", payload);\\n      if (payload.new && \\"data\\" in payload.new) {\\n        gameState = payload.new.data;\\n        console.log(\\"Game state updated from real-time:\\", gameState);\\n        if (gameState.round !== lastKnownRound) {\\n          lastKnownRound = gameState.round;\\n          statusMessage = `Round advanced to ${gameState.round}`;\\n        }\\n      }\\n    }\\n  ).subscribe((status) => {\\n    console.log(\\"Subscription status:\\", status);\\n  });\\n  pollInterval = setInterval(async () => {\\n    if (!document.hidden) {\\n      await checkForUpdates();\\n    }\\n  }, 300);\\n});\\nonDestroy(() => {\\n  if (pollInterval) {\\n    clearInterval(pollInterval);\\n  }\\n  if (gameState && currentTeam) {\\n    gameState.active_users[currentTeam] = false;\\n    saveGameState();\\n  }\\n});\\nasync function checkForUpdates() {\\n  const { data, error } = await supabase.from(\\"game_state\\").select(\\"data\\").single();\\n  if (!error && data) {\\n    const newState = data.data;\\n    if (JSON.stringify(newState) !== JSON.stringify(gameState)) {\\n      console.log(\\"Polling detected changes, updating state\\");\\n      if (newState.round !== lastKnownRound) {\\n        lastKnownRound = newState.round;\\n        statusMessage = `Round advanced to ${newState.round}`;\\n      }\\n      gameState = newState;\\n    }\\n  }\\n}\\nasync function loadGameState() {\\n  loading = true;\\n  try {\\n    const { data, error } = await supabase.from(\\"game_state\\").select(\\"data\\").limit(1).maybeSingle();\\n    if (error) {\\n      console.error(\\"Error loading game state:\\", error);\\n      statusMessage = \\"Error loading game state: \\" + error.message;\\n    } else if (data) {\\n      gameState = data.data;\\n    } else {\\n      statusMessage = \\"No game state found\\";\\n    }\\n  } catch (err) {\\n    console.error(\\"Exception loading game state:\\", err);\\n    statusMessage = \\"Error: \\" + (err instanceof Error ? err.message : String(err));\\n  }\\n  loading = false;\\n}\\nasync function saveGameState() {\\n  if (!gameState) return;\\n  const { error } = await supabase.from(\\"game_state\\").update({ data: gameState, updated_at: (/* @__PURE__ */ new Date()).toISOString() }).eq(\\"id\\", (await supabase.from(\\"game_state\\").select(\\"id\\").single()).data?.id);\\n  if (error) {\\n    console.error(\\"Error saving:\\", error);\\n  }\\n}\\nfunction calculateBudget() {\\n  if (!currentTeam || !gameState) return;\\n  const teamState2 = gameState.teams[currentTeam];\\n  const W = teamState2.W;\\n  const budget = 2 * W;\\n  const pop_values = TEAMS.map((t) => gameState.teams[t].POP);\\n  const mean_pop = pop_values.reduce((a, b) => a + b, 0) / pop_values.length;\\n  const pop_factor = teamState2.POP / mean_pop;\\n  const se_cost = allocSE ? Math.ceil(pop_factor) : 0;\\n  const te_cost = allocTE ? 1 : 0;\\n  const br_cost = allocBR;\\n  const sp_cost = allocSP.filter((sp) => sp.target !== \\"\\").length;\\n  const ar_total = allocAR.L + allocAR.M + allocAR.H;\\n  let ar_cost = 0;\\n  if (ar_total > 0) {\\n    const tier1 = Math.min(2, ar_total);\\n    const tier2 = Math.min(2, Math.max(0, ar_total - 2));\\n    const tier3 = Math.max(0, ar_total - 4);\\n    ar_cost = 1 * tier1 + 2 * tier2 + 3 * tier3;\\n  }\\n  const used = se_cost + te_cost + br_cost + ar_cost + sp_cost;\\n  const remaining = budget - used;\\n  budgetInfo = { used, budget, remaining };\\n  if (remaining < 0) {\\n    budgetColor = \\"#ffcccc\\";\\n    canSubmit = false;\\n  } else if (remaining <= budget * 0.25) {\\n    budgetColor = \\"#fff8cc\\";\\n    canSubmit = true;\\n  } else {\\n    budgetColor = \\"#d9ffd9\\";\\n    canSubmit = true;\\n  }\\n}\\nasync function submitAllocations() {\\n  if (!currentTeam || !gameState) return;\\n  const teamState2 = gameState.teams[currentTeam];\\n  if (teamState2.submitted) {\\n    statusMessage = \\"Already submitted for this round\\";\\n    return;\\n  }\\n  const ar_caps = { L: 3, M: 2, H: 1 };\\n  for (const tech of [\\"L\\", \\"M\\", \\"H\\"]) {\\n    if (allocAR[tech] > ar_caps[tech]) {\\n      statusMessage = `AR(${tech}) limited to ${ar_caps[tech]} dice per round`;\\n      return;\\n    }\\n  }\\n  for (const tech of [\\"L\\", \\"M\\", \\"H\\"]) {\\n    if (teamState2.discovered[tech] && allocAR[tech] > 0) {\\n      statusMessage = `You\'ve already discovered ${tech} tech`;\\n      return;\\n    }\\n  }\\n  const effBR = teamState2.BR_effective;\\n  if (allocAR.M > 0 && effBR < GAME_CONFIG.tech_info.M.br_req) {\\n    statusMessage = `M-level tech requires ${GAME_CONFIG.tech_info.M.br_req} BR (you have ${effBR.toFixed(1)})`;\\n    return;\\n  }\\n  if (allocAR.H > 0 && effBR < GAME_CONFIG.tech_info.H.br_req) {\\n    statusMessage = `H-level tech requires ${GAME_CONFIG.tech_info.H.br_req} BR (you have ${effBR.toFixed(1)})`;\\n    return;\\n  }\\n  const validation = validate_budget(\\n    teamState2.W,\\n    {\\n      SE: allocSE ? 1 : 0,\\n      TE: allocTE ? 1 : 0,\\n      BR: allocBR,\\n      AR: allocAR,\\n      SP: allocSP\\n    },\\n    teamState2.POP,\\n    gameState.teams\\n  );\\n  if (!validation.ok) {\\n    statusMessage = `Budget exceeded: ${validation.used}/${validation.budget} dice`;\\n    return;\\n  }\\n  const dice_log = [];\\n  if (allocBR > 0) {\\n    const rolls = roll_dice(allocBR);\\n    const succ = rolls.filter((r) => r >= 4).length;\\n    dice_log.push({\\n      Phase: \\"BR\\",\\n      Tech: \\"-\\",\\n      Rolls: rolls.join(\\", \\"),\\n      \\\\u0394TK: `+${succ}`,\\n      \\\\u0394TP: \\"\\\\u2014\\",\\n      \\\\u0394IM: \\"\\\\u2014\\",\\n      SP_Result: \\"\\\\u2014\\"\\n    });\\n  }\\n  for (const tech of [\\"L\\", \\"M\\", \\"H\\"]) {\\n    if (allocAR[tech] > 0) {\\n      const rolls = roll_dice(allocAR[tech]);\\n      const thr = GAME_CONFIG.tech_info[tech].ar_thr;\\n      const succ = rolls.filter((r) => r >= thr).length;\\n      const tp_gains = GAME_CONFIG.tech_info[tech].tp_draw(succ, teamState2.TK);\\n      const tp_total = tp_gains.reduce((a, b) => a + b, 0);\\n      dice_log.push({\\n        Phase: \\"AR\\",\\n        Tech: tech,\\n        Rolls: rolls.join(\\", \\"),\\n        \\\\u0394TK: `+${allocAR[tech]}`,\\n        \\\\u0394TP: `+${tp_total}`,\\n        \\\\u0394IM: \\"\\\\u2014\\",\\n        SP_Result: \\"\\\\u2014\\"\\n      });\\n    }\\n  }\\n  if (allocIM === \\"open\\" && teamState2.IM === 0) {\\n    dice_log.push({\\n      Phase: \\"Policy\\",\\n      Tech: \\"-\\",\\n      Rolls: \\"\\\\u2014\\",\\n      \\\\u0394TK: \\"\\\\u2014\\",\\n      \\\\u0394TP: \\"\\\\u2014\\",\\n      \\\\u0394IM: \\"Opened\\",\\n      SP_Result: \\"\\\\u2014\\"\\n    });\\n  } else if (allocIM === \\"close\\" && teamState2.IM === 1) {\\n    dice_log.push({\\n      Phase: \\"Policy\\",\\n      Tech: \\"-\\",\\n      Rolls: \\"\\\\u2014\\",\\n      \\\\u0394TK: \\"\\\\u2014\\",\\n      \\\\u0394TP: \\"\\\\u2014\\",\\n      \\\\u0394IM: \\"Closed\\",\\n      SP_Result: \\"\\\\u2014\\"\\n    });\\n  }\\n  for (const sp of allocSP) {\\n    if (sp.target !== \\"\\") {\\n      const target_state = gameState.teams[sp.target];\\n      const roll = Math.floor(Math.random() * 6) + 1;\\n      let eff_roll = roll;\\n      if (target_state.IM === 1) eff_roll = Math.min(6, roll + 1);\\n      else eff_roll = Math.max(1, roll - 1);\\n      const caught_thr = sp.tech === \\"L\\" ? 1 : sp.tech === \\"M\\" ? 2 : 3;\\n      const fail_range = sp.tech === \\"L\\" ? [2, 3] : sp.tech === \\"M\\" ? [3, 4] : [4];\\n      let result = \\"Failed\\";\\n      if (eff_roll <= caught_thr) result = \\"Caught\\";\\n      else if (fail_range.includes(eff_roll)) result = \\"Failed\\";\\n      else if (eff_roll === 5) result = \\"Observe\\";\\n      else if (eff_roll === 6) result = \\"Observe+Copy\\";\\n      dice_log.push({\\n        Phase: \\"SP\\",\\n        Tech: sp.tech,\\n        Rolls: `${roll} \\\\u2192 ${eff_roll}`,\\n        \\\\u0394TK: \\"\\\\u2014\\",\\n        \\\\u0394TP: \\"\\\\u2014\\",\\n        \\\\u0394IM: \\"\\\\u2014\\",\\n        SP_Result: result\\n      });\\n    }\\n  }\\n  const leftover = validation.budget - validation.used;\\n  const carry_gain = 2 / 3 * leftover;\\n  const new_carry = teamState2.carry_fraction + carry_gain;\\n  const carry_whole = Math.floor(new_carry);\\n  const carry_remain = new_carry - carry_whole;\\n  dice_log.push({\\n    Phase: \\"Carryover\\",\\n    Tech: \\"-\\",\\n    Rolls: `${leftover} unused`,\\n    \\\\u0394TK: \\"\\\\u2014\\",\\n    \\\\u0394TP: \\"\\\\u2014\\",\\n    \\\\u0394IM: \\"\\\\u2014\\",\\n    SP_Result: `+${carry_whole} W next round | remainder ${carry_remain.toFixed(2)}`\\n  });\\n  teamState2.submitted = true;\\n  teamState2.dice_log = dice_log;\\n  teamState2.unspent_dice = leftover;\\n  teamState2.carry_fraction = carry_remain;\\n  teamState2.pending_W_carryover = carry_whole;\\n  gameState.submissions[currentTeam] = {\\n    SE: allocSE ? 1 : 0,\\n    TE: allocTE ? 1 : 0,\\n    IM: allocIM,\\n    BR: allocBR,\\n    AR: allocAR,\\n    SP: allocSP.map((sp) => sp.target ? sp : null)\\n  };\\n  await saveGameState();\\n  statusMessage = \\"Allocations submitted! Dice rolled.\\";\\n}\\nfunction logout() {\\n  sessionStorage.clear();\\n  goto(\\"/\\");\\n}\\n$: if (currentTeam && gameState) {\\n  calculateBudget();\\n}\\n$: teamState = currentTeam && gameState ? gameState.teams[currentTeam] : null;\\n$: otherTeams = currentTeam ? TEAMS.filter((t) => t !== currentTeam) : [];\\n$: canAccessM = teamState && teamState.BR_effective >= GAME_CONFIG.tech_info.M.br_req;\\n$: canAccessH = teamState && teamState.BR_effective >= GAME_CONFIG.tech_info.H.br_req;\\n<\/script>\\n\\n<svelte:head>\\n\\t<title>Team Interface - {currentTeam}</title>\\n</svelte:head>\\n\\n<main class=\\"container\\">\\n\\t<div class=\\"header\\">\\n\\t\\t<h1>Team: {currentTeam}</h1>\\n\\t\\t<button on:click={logout} class=\\"btn-logout\\">Logout</button>\\n\\t</div>\\n\\n\\t{#if loading}\\n\\t\\t<div class=\\"card\\">\\n\\t\\t\\t<p>Loading game state...</p>\\n\\t\\t</div>\\n\\t{:else if !gameState?.game_ready}\\n\\t\\t<div class=\\"card\\">\\n\\t\\t\\t<h2 style=\\"color:red;\\">⏳ Waiting for GM to initialize the game...</h2>\\n\\t\\t\\t<p>The Game Master must initialize the game before you can play.</p>\\n\\t\\t</div>\\n\\t{:else if teamState}\\n\\t\\t{#if statusMessage}\\n\\t\\t\\t<div class=\\"alert {statusMessage.includes(\'Error\') || statusMessage.includes(\'Warning\') ? \'alert-warning\' : \'alert-success\'}\\">\\n\\t\\t\\t\\t{statusMessage}\\n\\t\\t\\t</div>\\n\\t\\t{/if}\\n\\n\\t\\t<!-- Status Header -->\\n\\t\\t<div class=\\"card status-header\\">\\n\\t\\t\\t<div class=\\"status-grid\\">\\n\\t\\t\\t\\t<div>\\n\\t\\t\\t\\t\\t<strong>Round:</strong> {gameState.round}/{GAME_CONFIG.max_rounds}\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div>\\n\\t\\t\\t\\t\\t<strong>Budget (W):</strong> {teamState.W} | <strong>Dice:</strong> {2 * teamState.W} | <strong>Immigration:</strong> {teamState.IM === 1 ? \'Open\' : \'Closed\'}\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div>\\n\\t\\t\\t\\t\\t<strong>Talent (K):</strong> {teamState.K.toFixed(1)} | <strong>Knowledge (TK):</strong> {teamState.TK}\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div>\\n\\t\\t\\t\\t\\t<strong>Score (TP) L/M/H:</strong> {teamState.TP.L}/{teamState.TP.M}/{teamState.TP.H}\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t\\t{#if teamState.submitted}\\n\\t\\t\\t\\t<div class=\\"submitted-banner\\">Submitted for this round - waiting for GM</div>\\n\\t\\t\\t{/if}\\n\\t\\t</div>\\n\\n\\t\\t<!-- Budget Display -->\\n\\t\\t<div class=\\"budget-box\\" style=\\"background: {budgetColor};\\">\\n\\t\\t\\tDice: {budgetInfo.budget} &nbsp;|&nbsp; Spent: {budgetInfo.used} &nbsp;|&nbsp; Remaining: <strong>{budgetInfo.remaining}</strong>\\n\\t\\t</div>\\n\\t\\t{#if budgetInfo.remaining < 0}\\n\\t\\t\\t<div class=\\"alert alert-warning\\">\\n\\t\\t\\t\\tYou are over budget! Please reduce allocations.\\n\\t\\t\\t</div>\\n\\t\\t{/if}\\n\\n\\t\\t<!-- Allocation Form -->\\n\\t\\t<div class=\\"card\\">\\n\\t\\t\\t<h2>Submit Allocations for Round {gameState.round}</h2>\\n\\t\\t\\t\\n\\t\\t\\t<div class=\\"allocation-grid\\">\\n\\t\\t\\t\\t<!-- Education Column -->\\n\\t\\t\\t\\t<div class=\\"allocation-section\\">\\n\\t\\t\\t\\t\\t<h3>Education (SE/TE)</h3>\\n\\t\\t\\t\\t\\t<p class=\\"help-text\\">Two ways to build K (talent)</p>\\n\\t\\t\\t\\t\\t<label class=\\"checkbox-label\\">\\n\\t\\t\\t\\t\\t\\t<input type=\\"checkbox\\" bind:checked={allocSE} disabled={teamState.submitted} />\\n\\t\\t\\t\\t\\t\\tSecondary Education (+1 K)\\n\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t<label class=\\"checkbox-label\\">\\n\\t\\t\\t\\t\\t\\t<input type=\\"checkbox\\" bind:checked={allocTE} disabled={teamState.submitted} />\\n\\t\\t\\t\\t\\t\\tTertiary Education (+1 K × (1+IM))\\n\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<h4 style=\\"margin-top: 1.5rem;\\">Immigration Policy</h4>\\n\\t\\t\\t\\t\\t<div class=\\"radio-group\\">\\n\\t\\t\\t\\t\\t\\t<label>\\n\\t\\t\\t\\t\\t\\t\\t<input type=\\"radio\\" bind:group={allocIM} value=\\"none\\" disabled={teamState.submitted} />\\n\\t\\t\\t\\t\\t\\t\\tNo change\\n\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t<label>\\n\\t\\t\\t\\t\\t\\t\\t<input type=\\"radio\\" bind:group={allocIM} value=\\"open\\" disabled={teamState.submitted} />\\n\\t\\t\\t\\t\\t\\t\\tOpen (→1)\\n\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t<label>\\n\\t\\t\\t\\t\\t\\t\\t<input type=\\"radio\\" bind:group={allocIM} value=\\"close\\" disabled={teamState.submitted} />\\n\\t\\t\\t\\t\\t\\t\\tClosed (→0)\\n\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t<!-- Basic Research Column -->\\n\\t\\t\\t\\t<div class=\\"allocation-section\\">\\n\\t\\t\\t\\t\\t<h3>Basic Research (BR - Public)</h3>\\n\\t\\t\\t\\t\\t<p class=\\"help-text\\">BR builds TK but is shared with others</p>\\n\\t\\t\\t\\t\\t<label>\\n\\t\\t\\t\\t\\t\\tBR investment:\\n\\t\\t\\t\\t\\t\\t<input \\n\\t\\t\\t\\t\\t\\t\\ttype=\\"number\\" \\n\\t\\t\\t\\t\\t\\t\\tbind:value={allocBR} \\n\\t\\t\\t\\t\\t\\t\\tmin=\\"0\\" \\n\\t\\t\\t\\t\\t\\t\\tmax={2 * teamState.W}\\n\\t\\t\\t\\t\\t\\t\\tdisabled={teamState.submitted}\\n\\t\\t\\t\\t\\t\\t\\tclass=\\"number-input\\"\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t<!-- Applied Research Column -->\\n\\t\\t\\t\\t<div class=\\"allocation-section\\">\\n\\t\\t\\t\\t\\t<h3>Applied Research (AR - Secret)</h3>\\n\\t\\t\\t\\t\\t<p class=\\"help-text\\">Probabilistic discovery. Value scales with K</p>\\n\\t\\t\\t\\t\\t<label>\\n\\t\\t\\t\\t\\t\\tAR (Incremental):\\n\\t\\t\\t\\t\\t\\t<input \\n\\t\\t\\t\\t\\t\\t\\ttype=\\"number\\" \\n\\t\\t\\t\\t\\t\\t\\tbind:value={allocAR.L} \\n\\t\\t\\t\\t\\t\\t\\tmin=\\"0\\" \\n\\t\\t\\t\\t\\t\\t\\tmax=\\"3\\"\\n\\t\\t\\t\\t\\t\\t\\tdisabled={teamState.submitted || teamState.discovered.L}\\n\\t\\t\\t\\t\\t\\t\\tclass=\\"number-input\\"\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t<label>\\n\\t\\t\\t\\t\\t\\tAR (Advanced):\\n\\t\\t\\t\\t\\t\\t<input \\n\\t\\t\\t\\t\\t\\t\\ttype=\\"number\\" \\n\\t\\t\\t\\t\\t\\t\\tbind:value={allocAR.M} \\n\\t\\t\\t\\t\\t\\t\\tmin=\\"0\\" \\n\\t\\t\\t\\t\\t\\t\\tmax=\\"2\\"\\n\\t\\t\\t\\t\\t\\t\\tdisabled={teamState.submitted || !canAccessM || teamState.discovered.M}\\n\\t\\t\\t\\t\\t\\t\\tclass=\\"number-input\\"\\n\\t\\t\\t\\t\\t\\t\\tclass:disabled={!canAccessM}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t{#if !canAccessM}\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\"req-text\\">Requires {GAME_CONFIG.tech_info.M.br_req} BR</span>\\n\\t\\t\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t<label>\\n\\t\\t\\t\\t\\t\\tAR (Radical):\\n\\t\\t\\t\\t\\t\\t<input \\n\\t\\t\\t\\t\\t\\t\\ttype=\\"number\\" \\n\\t\\t\\t\\t\\t\\t\\tbind:value={allocAR.H} \\n\\t\\t\\t\\t\\t\\t\\tmin=\\"0\\" \\n\\t\\t\\t\\t\\t\\t\\tmax=\\"1\\"\\n\\t\\t\\t\\t\\t\\t\\tdisabled={teamState.submitted || !canAccessH || teamState.discovered.H}\\n\\t\\t\\t\\t\\t\\t\\tclass=\\"number-input\\"\\n\\t\\t\\t\\t\\t\\t\\tclass:disabled={!canAccessH}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t{#if !canAccessH}\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\"req-text\\">Requires {GAME_CONFIG.tech_info.H.br_req} BR</span>\\n\\t\\t\\t\\t\\t\\t{/if}\\n\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t<!-- Espionage Column -->\\n\\t\\t\\t\\t<div class=\\"allocation-section\\">\\n\\t\\t\\t\\t\\t<h3>Espionage Effort (SP)</h3>\\n\\t\\t\\t\\t\\t<p class=\\"help-text\\">Max two targets per round</p>\\n\\t\\t\\t\\t\\t<label>\\n\\t\\t\\t\\t\\t\\tTarget #1:\\n\\t\\t\\t\\t\\t\\t<select bind:value={allocSP[0].target} disabled={teamState.submitted} class=\\"select-input\\">\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\"\\">—</option>\\n\\t\\t\\t\\t\\t\\t\\t{#each otherTeams as team}\\n\\t\\t\\t\\t\\t\\t\\t\\t<option value={team}>{team}</option>\\n\\t\\t\\t\\t\\t\\t\\t{/each}\\n\\t\\t\\t\\t\\t\\t</select>\\n\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t<label>\\n\\t\\t\\t\\t\\t\\tTech area #1:\\n\\t\\t\\t\\t\\t\\t<select bind:value={allocSP[0].tech} disabled={teamState.submitted} class=\\"select-input\\">\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\"L\\">L</option>\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\"M\\">M</option>\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\"H\\">H</option>\\n\\t\\t\\t\\t\\t\\t</select>\\n\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<label style=\\"margin-top: 1rem;\\">\\n\\t\\t\\t\\t\\t\\tTarget #2:\\n\\t\\t\\t\\t\\t\\t<select bind:value={allocSP[1].target} disabled={teamState.submitted} class=\\"select-input\\">\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\"\\">—</option>\\n\\t\\t\\t\\t\\t\\t\\t{#each otherTeams as team}\\n\\t\\t\\t\\t\\t\\t\\t\\t<option value={team}>{team}</option>\\n\\t\\t\\t\\t\\t\\t\\t{/each}\\n\\t\\t\\t\\t\\t\\t</select>\\n\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t<label>\\n\\t\\t\\t\\t\\t\\tTech area #2:\\n\\t\\t\\t\\t\\t\\t<select bind:value={allocSP[1].tech} disabled={teamState.submitted} class=\\"select-input\\">\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\"L\\">L</option>\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\"M\\">M</option>\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\"H\\">H</option>\\n\\t\\t\\t\\t\\t\\t</select>\\n\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\n\\t\\t\\t<button \\n\\t\\t\\t\\ton:click={submitAllocations} \\n\\t\\t\\t\\tclass=\\"btn btn-primary btn-large\\"\\n\\t\\t\\t\\tdisabled={!canSubmit || teamState.submitted}\\n\\t\\t\\t>\\n\\t\\t\\t\\t{teamState.submitted ? \'Already Submitted\' : \'Submit Allocations\'}\\n\\t\\t\\t</button>\\n\\t\\t</div>\\n\\n\\t\\t<!-- Dice Roll Results -->\\n\\t\\t<div class=\\"card\\">\\n\\t\\t\\t<h3>Your Dice Rolls This Round</h3>\\n\\t\\t\\t{#if teamState.dice_log && teamState.dice_log.length > 0}\\n\\t\\t\\t\\t<div class=\\"table-scroll\\">\\n\\t\\t\\t\\t\\t<table>\\n\\t\\t\\t\\t\\t\\t<thead>\\n\\t\\t\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t\\t\\t<th>Phase</th>\\n\\t\\t\\t\\t\\t\\t\\t\\t<th>Tech</th>\\n\\t\\t\\t\\t\\t\\t\\t\\t<th>Rolls</th>\\n\\t\\t\\t\\t\\t\\t\\t\\t<th>ΔTK</th>\\n\\t\\t\\t\\t\\t\\t\\t\\t<th>ΔTP</th>\\n\\t\\t\\t\\t\\t\\t\\t\\t<th>ΔIM</th>\\n\\t\\t\\t\\t\\t\\t\\t\\t<th>SP Result</th>\\n\\t\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t\\t</thead>\\n\\t\\t\\t\\t\\t\\t<tbody>\\n\\t\\t\\t\\t\\t\\t\\t{#each teamState.dice_log as log}\\n\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{log.Phase}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{log.Tech}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{log.Rolls}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{log.ΔTK}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{log.ΔTP}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{log.ΔIM}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{log.SP_Result}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t\\t\\t{/each}\\n\\t\\t\\t\\t\\t\\t</tbody>\\n\\t\\t\\t\\t\\t</table>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t{:else}\\n\\t\\t\\t\\t<p class=\\"muted\\">No dice rolls yet for this round</p>\\n\\t\\t\\t{/if}\\n\\t\\t</div>\\n\\n\\t\\t<!-- Private Log -->\\n\\t\\t<div class=\\"card\\">\\n\\t\\t\\t<h3>Your Private AR & SP Log</h3>\\n\\t\\t\\t<div class=\\"log-container\\">\\n\\t\\t\\t\\t{#if currentTeam}\\n\\t\\t\\t\\t\\t{#each gameState.private_logs[currentTeam].slice().reverse() as log}\\n\\t\\t\\t\\t\\t\\t<div class=\\"log-entry\\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\"log-round\\">R{log.round}</span>\\n\\t\\t\\t\\t\\t\\t\\t{log.event}\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t{:else}\\n\\t\\t\\t\\t\\t\\t<p class=\\"muted\\">No private events yet</p>\\n\\t\\t\\t\\t\\t{/each}\\n\\t\\t\\t\\t{/if}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\n\\t\\t<!-- Public Event Log -->\\n\\t\\t<div class=\\"card\\">\\n\\t\\t\\t<h3>Public Event Log (BR & Caught Spies)</h3>\\n\\t\\t\\t<div class=\\"log-container\\">\\n\\t\\t\\t\\t{#each gameState.public_log.slice().reverse().slice(0, 20) as log}\\n\\t\\t\\t\\t\\t<div class=\\"log-entry\\">\\n\\t\\t\\t\\t\\t\\t<span class=\\"log-round\\">R{log.round}</span>\\n\\t\\t\\t\\t\\t\\t{log.event}\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t{:else}\\n\\t\\t\\t\\t\\t<p class=\\"muted\\">No public events yet</p>\\n\\t\\t\\t\\t{/each}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\n\\t\\t<!-- Public Status Overview -->\\n\\t\\t<div class=\\"card\\">\\n\\t\\t\\t<h3>Public Status Overview</h3>\\n\\t\\t\\t<div class=\\"table-scroll\\">\\n\\t\\t\\t\\t<table>\\n\\t\\t\\t\\t\\t<thead>\\n\\t\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t\\t<th>Team</th>\\n\\t\\t\\t\\t\\t\\t\\t<th>GDP</th>\\n\\t\\t\\t\\t\\t\\t\\t<th>W</th>\\n\\t\\t\\t\\t\\t\\t\\t<th>POP</th>\\n\\t\\t\\t\\t\\t\\t\\t<th>SE</th>\\n\\t\\t\\t\\t\\t\\t\\t<th>TE</th>\\n\\t\\t\\t\\t\\t\\t\\t<th>IM</th>\\n\\t\\t\\t\\t\\t\\t\\t<th>K</th>\\n\\t\\t\\t\\t\\t\\t\\t<th>TK</th>\\n\\t\\t\\t\\t\\t\\t\\t<th>BR (Own)</th>\\n\\t\\t\\t\\t\\t\\t\\t<th>BR (Global)</th>\\n\\t\\t\\t\\t\\t\\t\\t<th>TP(L)</th>\\n\\t\\t\\t\\t\\t\\t\\t<th>TP(M)</th>\\n\\t\\t\\t\\t\\t\\t\\t<th>TP(H)</th>\\n\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t</thead>\\n\\t\\t\\t\\t\\t<tbody>\\n\\t\\t\\t\\t\\t\\t{#each TEAMS as team}\\n\\t\\t\\t\\t\\t\\t\\t{@const st = gameState.teams[team]}\\n\\t\\t\\t\\t\\t\\t\\t{@const canSeeL = team === currentTeam || teamState.spy_revealed[team]?.L}\\n\\t\\t\\t\\t\\t\\t\\t{@const canSeeM = team === currentTeam || teamState.spy_revealed[team]?.M}\\n\\t\\t\\t\\t\\t\\t\\t{@const canSeeH = team === currentTeam || teamState.spy_revealed[team]?.H}\\n\\t\\t\\t\\t\\t\\t\\t<tr class:current-team={team === currentTeam}>\\n\\t\\t\\t\\t\\t\\t\\t\\t<td><strong>{team}</strong></td>\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>{st.GDP.toFixed(0)}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>{st.W}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>{st.POP.toFixed(1)}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>{st.SE}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>{st.TE}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>{st.IM}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>{st.K.toFixed(1)}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>{team === currentTeam ? st.TK : \'?\'}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>{st.BR_total.toFixed(0)}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>{st.BR_effective.toFixed(1)}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>{canSeeL ? st.TP.L : \'?\'}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>{canSeeM ? st.TP.M : \'?\'}</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>{canSeeH ? st.TP.H : \'?\'}</td>\\n\\t\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t\\t{/each}\\n\\t\\t\\t\\t\\t</tbody>\\n\\t\\t\\t\\t</table>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t{/if}\\n</main>\\n\\n<style>\\n\\t:global(body) {\\n\\t\\tmargin: 0;\\n\\t\\tpadding: 0;\\n\\t\\tfont-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\\n\\t\\tbackground: #2d2d30;\\n\\t\\tmin-height: 100vh;\\n\\t}\\n\\n\\t.container {\\n\\t\\tmax-width: 1400px;\\n\\t\\tmargin: 0 auto;\\n\\t\\tpadding: 2rem 1rem;\\n\\t}\\n\\n\\t.header {\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: space-between;\\n\\t\\talign-items: center;\\n\\t\\tmargin-bottom: 2rem;\\n\\t}\\n\\n\\th1 {\\n\\t\\tcolor: white;\\n\\t\\tmargin: 0;\\n\\t\\tfont-size: 2rem;\\n\\t}\\n\\n\\th2, h3 {\\n\\t\\tmargin-top: 0;\\n\\t\\tcolor: #e0e0e0;\\n\\t}\\n\\n\\th4 {\\n\\t\\tcolor: #cccccc;\\n\\t\\tmargin-top: 0;\\n\\t}\\n\\n\\t.btn-logout {\\n\\t\\tpadding: 0.5rem 1rem;\\n\\t\\tbackground: rgba(255, 255, 255, 0.1);\\n\\t\\tcolor: white;\\n\\t\\tborder: 2px solid rgba(255, 255, 255, 0.3);\\n\\t\\tborder-radius: 6px;\\n\\t\\tcursor: pointer;\\n\\t\\tfont-weight: 600;\\n\\t}\\n\\n\\t.btn-logout:hover {\\n\\t\\tbackground: rgba(255, 255, 255, 0.2);\\n\\t}\\n\\n\\t.card {\\n\\t\\tbackground: #3e3e42;\\n\\t\\tborder-radius: 12px;\\n\\t\\tpadding: 2rem;\\n\\t\\tbox-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);\\n\\t\\tmargin-bottom: 2rem;\\n\\t}\\n\\n\\t.alert {\\n\\t\\tpadding: 1rem;\\n\\t\\tborder-radius: 8px;\\n\\t\\tmargin-bottom: 1rem;\\n\\t\\tfont-weight: 500;\\n\\t}\\n\\n\\t.alert-success {\\n\\t\\tbackground: #d4edda;\\n\\t\\tcolor: #155724;\\n\\t\\tborder: 1px solid #c3e6cb;\\n\\t}\\n\\n\\t.alert-warning {\\n\\t\\tbackground: #fff3cd;\\n\\t\\tcolor: #856404;\\n\\t\\tborder: 1px solid #ffeaa7;\\n\\t}\\n\\n\\t.status-header {\\n\\t\\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n\\t\\tcolor: white;\\n\\t}\\n\\n\\t.status-grid {\\n\\t\\tdisplay: grid;\\n\\t\\tgrid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\\n\\t\\tgap: 1rem;\\n\\t\\tfont-size: 0.95rem;\\n\\t}\\n\\n\\t.submitted-banner {\\n\\t\\tmargin-top: 1rem;\\n\\t\\tpadding: 0.75rem;\\n\\t\\tbackground: rgba(255, 255, 255, 0.2);\\n\\t\\tborder-radius: 6px;\\n\\t\\ttext-align: center;\\n\\t\\tfont-weight: bold;\\n\\t\\tfont-size: 1.1rem;\\n\\t}\\n\\n\\t.budget-box {\\n\\t\\tpadding: 1rem;\\n\\t\\tborder-radius: 8px;\\n\\t\\tmargin-bottom: 1rem;\\n\\t\\ttext-align: center;\\n\\t\\tfont-weight: 600;\\n\\t\\tfont-size: 1.1rem;\\n\\t\\tbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\\n\\t}\\n\\n\\t.allocation-grid {\\n\\t\\tdisplay: grid;\\n\\t\\tgrid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\\n\\t\\tgap: 2rem;\\n\\t\\tmargin-bottom: 2rem;\\n\\t}\\n\\n\\t.allocation-section {\\n\\t\\tpadding: 1.5rem;\\n\\t\\tbackground: #252526;\\n\\t\\tborder-radius: 8px;\\n\\t}\\n\\n\\t.allocation-section h3 {\\n\\t\\tmargin-top: 0;\\n\\t\\tcolor: #8a9dff;\\n\\t\\tfont-size: 1.1rem;\\n\\t}\\n\\n\\t.help-text {\\n\\t\\tcolor: #9d9d9d;\\n\\t\\tfont-size: 0.85rem;\\n\\t\\tmargin-bottom: 1rem;\\n\\t\\tfont-style: italic;\\n\\t}\\n\\n\\tlabel {\\n\\t\\tdisplay: block;\\n\\t\\tmargin-bottom: 0.75rem;\\n\\t\\tfont-weight: 500;\\n\\t\\tcolor: #cccccc;\\n\\t}\\n\\n\\t.checkbox-label {\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n\\t\\tgap: 0.5rem;\\n\\t\\tcursor: pointer;\\n\\t}\\n\\n\\t.checkbox-label input {\\n\\t\\tcursor: pointer;\\n\\t}\\n\\n\\t.radio-group {\\n\\t\\tdisplay: flex;\\n\\t\\tflex-direction: column;\\n\\t\\tgap: 0.5rem;\\n\\t}\\n\\n\\t.radio-group label {\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n\\t\\tgap: 0.5rem;\\n\\t\\tcursor: pointer;\\n\\t}\\n\\n\\t.number-input, .select-input {\\n\\t\\twidth: 100%;\\n\\t\\tpadding: 0.5rem;\\n\\t\\tmargin-top: 0.25rem;\\n\\t\\tborder: 2px solid #555;\\n\\t\\tborder-radius: 6px;\\n\\t\\tfont-size: 1rem;\\n\\t\\tbackground: #252526;\\n\\t\\tcolor: #e0e0e0;\\n\\t}\\n\\n\\t.number-input:focus, .select-input:focus {\\n\\t\\toutline: none;\\n\\t\\tborder-color: #667eea;\\n\\t}\\n\\n\\t.number-input:disabled, .select-input:disabled {\\n\\t\\tbackground: #1e1e1e;\\n\\t\\tcursor: not-allowed;\\n\\t\\topacity: 0.5;\\n\\t}\\n\\n\\t.number-input.disabled {\\n\\t\\tbackground: #3e2323;\\n\\t\\tborder-color: #dc3545;\\n\\t}\\n\\n\\t.req-text {\\n\\t\\tdisplay: block;\\n\\t\\tfont-size: 0.8rem;\\n\\t\\tcolor: #f48771;\\n\\t\\tmargin-top: 0.25rem;\\n\\t}\\n\\n\\t.btn {\\n\\t\\tpadding: 0.75rem 1.5rem;\\n\\t\\tfont-size: 1rem;\\n\\t\\tfont-weight: 600;\\n\\t\\tborder: none;\\n\\t\\tborder-radius: 6px;\\n\\t\\tcursor: pointer;\\n\\t\\ttransition: all 0.2s;\\n\\t}\\n\\n\\t.btn:hover:not(:disabled) {\\n\\t\\ttransform: translateY(-1px);\\n\\t\\tbox-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\\n\\t}\\n\\n\\t.btn:disabled {\\n\\t\\topacity: 0.6;\\n\\t\\tcursor: not-allowed;\\n\\t}\\n\\n\\t.btn-primary {\\n\\t\\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n\\t\\tcolor: white;\\n\\t}\\n\\n\\t.btn-large {\\n\\t\\twidth: 100%;\\n\\t\\tpadding: 1rem;\\n\\t\\tfont-size: 1.1rem;\\n\\t}\\n\\n\\ttable {\\n\\t\\twidth: 100%;\\n\\t\\tborder-collapse: collapse;\\n\\t}\\n\\n\\tth, td {\\n\\t\\tpadding: 0.75rem;\\n\\t\\ttext-align: left;\\n\\t\\tborder-bottom: 1px solid #555;\\n\\t\\tcolor: #cccccc;\\n\\t}\\n\\n\\tth {\\n\\t\\tbackground: #252526;\\n\\t\\tfont-weight: 600;\\n\\t\\tcolor: #e0e0e0;\\n\\t\\tfont-size: 0.9rem;\\n\\t}\\n\\n\\ttbody tr:hover {\\n\\t\\tbackground: #252526;\\n\\t}\\n\\n\\t.current-team {\\n\\t\\tbackground: #1e3a5f;\\n\\t\\tfont-weight: 600;\\n\\t}\\n\\n\\t.table-scroll {\\n\\t\\toverflow-x: auto;\\n\\t}\\n\\n\\t.log-container {\\n\\t\\tmax-height: 400px;\\n\\t\\toverflow-y: auto;\\n\\t\\tpadding: 1rem;\\n\\t\\tbackground: #252526;\\n\\t\\tborder-radius: 6px;\\n\\t}\\n\\n\\t.log-entry {\\n\\t\\tpadding: 0.5rem;\\n\\t\\tmargin-bottom: 0.5rem;\\n\\t\\tbackground: #3e3e42;\\n\\t\\tborder-radius: 4px;\\n\\t\\tfont-size: 0.9rem;\\n\\t\\tcolor: #cccccc;\\n\\t}\\n\\n\\t.log-round {\\n\\t\\tdisplay: inline-block;\\n\\t\\tbackground: #667eea;\\n\\t\\tcolor: white;\\n\\t\\tpadding: 0.125rem 0.5rem;\\n\\t\\tborder-radius: 4px;\\n\\t\\tfont-weight: 600;\\n\\t\\tmargin-right: 0.5rem;\\n\\t}\\n\\n\\t.muted {\\n\\t\\tcolor: #9d9d9d;\\n\\t\\tfont-style: italic;\\n\\t}\\n</style>\\n"],"names":[],"mappings":"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"}'
};
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let teamState;
  let currentTeam = null;
  onDestroy(() => {
  });
  $$result.css.add(css);
  teamState = null;
  teamState && teamState.BR_effective >= GAME_CONFIG.tech_info.M.br_req;
  teamState && teamState.BR_effective >= GAME_CONFIG.tech_info.H.br_req;
  return `${$$result.head += `<!-- HEAD_svelte-nksk0v_START -->${$$result.title = `<title>Team Interface - ${escape(currentTeam)}</title>`, ""}<!-- HEAD_svelte-nksk0v_END -->`, ""} <main class="container svelte-1l6qcjv"><div class="header svelte-1l6qcjv"><h1 class="svelte-1l6qcjv">Team: ${escape(currentTeam)}</h1> <button class="btn-logout svelte-1l6qcjv" data-svelte-h="svelte-1tokop0">Logout</button></div> ${`<div class="card svelte-1l6qcjv" data-svelte-h="svelte-rgk6g2"><p>Loading game state...</p></div>`} </main>`;
});
export {
  Page as default
};
